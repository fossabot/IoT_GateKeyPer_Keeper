### 1차 구성안(21.09.12ver)
시스템 구성의 최소 요건


#### [자물쇠 구성요소]
<img src="https://user-images.githubusercontent.com/89676600/132986304-fe942aaf-be40-4fe7-b538-e9d0ccea4981.jpg" width="80%" height="80%">

#### [키 구성요소]
<img src="https://user-images.githubusercontent.com/89676600/132986048-15ab4199-1026-49fc-b292-1f17f68976c6.jpg" width="80%" height="80%">

#### [크래들 구성요소]
<img src="https://user-images.githubusercontent.com/89676600/132986051-78c92331-b1bb-4ed0-b89d-badfbdb20883.jpg" width="80%" height="80%">

---
### 초기 테스트베드 구축 방안
#### [키 기능 테스트베드]
 - 아두이노 Nano또는 Uno 1개
 - 버튼 1개
 - 3색 LED 1개
 - 부저 1개

#### [자물쇠 기능 테스트 베드]
 - 아두이노 Nano또는 Uno 1개
 - 3색 LED 1개

---
### 키-자물쇠 기능에 대한 Flow
#### [키 배터리 기능 시나리오] : 테스트베드에서는 미구축
1. 배터리가 적으면 LED가 적색으로 깜빡거림 (켜짐 꺼짐 1:5 비율)
2. 배터리 단자 연결 시 녹색으로 깜빡거림 (충전중임을 알 수 있도록)
3. 배터리 완충 시 녹색으로 점등 (완충됨을 알 수 있도록)
4. 충전 잭 분리 시 기본적으로 LED 점등이 되지 않음
5. 버튼을 클릭하면 배터리 상황 3초간 도시 (50~100% : 녹색, 30~50% : 주황, 10~30% 적색)

#### [키-자물쇠 통신 시나리오]
1. 키를 자물쇠에 꽂음
    1. 키가 자물쇠와 연결되면 : (전원이 들어오면) 키는 LED 적색으로 점등, => 다음단계 진입
    2. 키가 비정상적으로 연결되면 : (전원이 안들어오면) 물리적으로 뺌 ("1." 항목으로 이동)
    
2. 자물쇠와 통신이 원활한지 확인
    > - 조건 1. 키에서 자물쇠로 패킷이 원활하게 보내져야 함
    > - 조건 2. 자물쇠에서 수신 후, 키로 자물쇠의 ID가 담긴 패킷이 원활하게 보내져야 함
    > - 조건 3. 키에서 자물쇠 패킷이 원활히 받아져야 함  
    1. 통신이 원활할 경우, 자물쇠의 LED가 적색으로 점등, 다음단계 진입
    2. 통신이 원활하지 않을 경우, 자물쇠 또는 키의 LED가 적색으로 깜빡임 (Error State)
        > - 에러 1. 물리적 조건으로 접촉 불량 의심. 자물쇠를 빼고 재시도 ("1." 항목으로 이동)
        > - 에러 2. I2C 통신 시, 데이터 오류 의심

3. 부저로 비프음을 울리고(켜지는것 같은 비프음 : 도-솔), LED를 파란색으로 점등, 지문 스캐닝 5초간 진행
    1. 지문이 정상일 경우, 현재 스캔이 된 지문과 키의 ID, 시간데이터를 자물쇠에 뿌려줌. 현재 시각, 자물쇠의 ID, 지문을 키의 EEPROM에 기입, => 다음단계 진입
    2. 지문이 비정상일 경우, (아예 지문의 형태가 아닐경우 모듈단위에서 감지함) 비프음으로 잘못되었음을 안내(경고음 : 도-도), "3."항목 재시작

4. 부저로 비프음을 울리고(인식이 된 것 같은 비프음 : 도-미-솔), LED를 초록으로 점등
5. 


