### 키-자물쇠 기능에 대한 사용 흐름과 UI
#### A. 키 -> 배터리 기능 구현 : 테스트베드에서는 미구축
- 배터리가 적으면 LED가 적색으로 깜빡거림 (켜짐 꺼짐 1:5 비율)
- 배터리 단자 연결 시 녹색으로 깜빡거림 (충전중임을 알 수 있도록)
- 배터리 완충 시 녹색으로 점등 (완충됨을 알 수 있도록)
- 충전 잭 분리 시 기본적으로 LED 점등이 되지 않음
- 버튼을 클릭하면 배터리 상황 3초간 도시 (50-100% : 녹색, 30-50% : 주황, 10-30% 적색)

#### B. 키와 자물쇠간 통신 시나리오
1. 키를 자물쇠에 꽂음
    1. 키가 자물쇠와 연결되면
        - (전원이 들어오면) 키는 LED 적색으로 점등
        - **다음단계 진입**   
           
    2. 키가 비정상적으로 연결되면
        - 사용자가 물리적으로 뺌 
        - **"1." 항목으로 이동**
               
2. 자물쇠와 통신이 원활한지 확인
    ```
    [통신 조건]
     * 조건 1. 키에서 자물쇠로 패킷이 원활하게 보내져야 함
     * 조건 2. 자물쇠에서 수신 후, 키로 자물쇠의 ID가 담긴 패킷이 원활하게 보내져야 함
     * 조건 3. 키에서 자물쇠 패킷이 원활히 받아져야 함   
    ```
    1. 통신이 원활할 경우
        - 자물쇠의 LED가 적색으로 점등
        - **다음단계 진입**   
          
    2. 통신이 원활하지 않을 경우
        - 자물쇠 또는 키의 LED가 적색으로 깜빡임.
        - 비프음으로 잘못되었음을 안내(경고음 : 도-도)
        - **"1." 항목으로 이동**   
       # 
    ```
    [에러 상황 예시]
     * 에러 1. 물리적 조건으로 접촉 불량 의심. 자물쇠를 빼고 재시도
     * 에러 2. I2C 통신 시, 데이터 오류 의심. 원인에 따라 대응 필요(아마 내부적인 디버깅이 필요 -> 생기면 안되는 현상) 
    ```
        
3. 키의 부저로 비프음을 울리고(켜지는 비프음 : 도-솔), 키의 LED를 파란색으로 점등, 지문 스캐닝 5초간 진행
    1. 지문이 정상일 경우,
        1. 자물쇠와 통신상태 재확인하여 양호 한 경우
            - 현재 스캔이 된 지문과 키의 ID, 시간데이터를 자물쇠에 패킷 송신. 
            - 자물쇠에서 패킷을 받아 자물쇠의 EEPROM에 기입
            - 현재 시각, 자물쇠의 ID, 지문을 키의 EEPROM에 기입
            - **다음단계 진입**
               
        3. 자물쇠와 통신 두절시
            - **"2." 항목 재시작** (이미 완전 단락되었을 가능성이 높으므로, 사실상 "1." 항목으로 이동.
               
    2. 지문이 비정상일 경우
        - (지문의 형태가 아닐경우 지문센서 모듈단위에서 감지함)
        - 비프음으로 잘못되었음을 안내(경고음 : 도-도)
        - **"3." 항목 재시작**

4. 0.5초 뒤, 자물쇠 해지 디스플레이(실제로는 이미 3.의 단계에서 해지가 되었으나, 그전에 키를 떼지 않도록 이후에 UI/UX차원으로 후속 도시)
    - 키의 부저로 비프음을 울림(인식이 된 비프음 : 도-미-솔)
    - 키의 LED를 초록으로 점등
    - 자물쇠의 LED를 초록으로 점등
    - 자물소의 Lock 해지
    
