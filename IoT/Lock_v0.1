// 락 역할 아두이노 (시리얼 X)
#include <Wire.h>

#define ReadDataBytes 20;
int Lock_ID = 10;
int State_Trig = 0;

void setup() {
  Wire.begin(Lock_ID);
  Wire.onReceive(receiveData);
  Wire.onRequest(requestEvent);
  Serial.begin(9600);
}

void loop (){
}

void receiveData(int bytes) {
  int i = 0;
  char inChar[20]={};
  while(Wire.available()){
    char ch = Wire.read();
    if(ch != '\n'){
      Serial.print(ch);
      inChar[i] = ch;
      i++;
    }else{break;)
  }
  String inPacket = inChar;
  
  if(inPacket.equals("Lock_ID")){
    State_Trig = 1;
  }else if(inPacket.equals("Test")){
    State_Trig = 3;
  }
}

void requestEvent() {
  switch (State_Trig){
    case 1:
      Serial.println("Debug Point 5");
      Wire.write("Data 1 Receive\n");
      State_Trig = 0;
      break;
    case 2:
      Serial.println("Debug Point 6");
      Wire.write("Data 2 Receive\n");
      State_Trig = 0;
      break;
    case 3:
      Serial.println("Debug Point 7");
      Wire.write("Now Testing!\n");
      State_Trig = 0;
      break;
    default :
      Serial.println("Debug Point 8");
      Wire.write("Data Come in\n");
      break;    
  }
}

